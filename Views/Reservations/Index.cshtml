@model AirBB.Models.ViewModels.ResidenceViewModel
@{
    ViewData["Title"] = "My Reservations";
}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">My Reservations</h2>
    </div>

    @if (Model.Residences == null || !Model.Residences.Any())
    {
        <div class="alert alert-info">You have no reservations.</div>
        <div class="mt-4 text-center">
            <a asp-controller="Home" asp-action="Index"
                asp-route-ActiveWhere ="@Model.ActiveWhere"
                asp-route-ActiveWho ="@Model.ActiveWho"
                class="btn btn-outline-secondary">
                Back to Home
            </a>
        </div>
    }
    else
    {
        <div class="row g-3">
            @foreach (var residence in Model.Residences)
            {
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card h-100 shadow-sm">
                        <div class="row g-0 h-100">
                            <div class="col-5">
                                <img src="~/images/@residence.ResidencePicture"
                                     class="img-fluid residence-img rounded-start"
                                     alt="@residence.Name" />
                            </div>
                            <div class="col-7">
                                <div class="card-body d-flex flex-column h-100">
                                    <h5 class="card-title mb-1">@residence.Name</h5>
                                    <p class="text-muted small mb-2">@residence.Location?.Name</p>

                                    <ul class="list-unstyled small mb-2">
                                        <li><strong>Guests:</strong> @residence.GuestNumber</li>
                                        <li><strong>Bedrooms:</strong> @residence.BedroomNumber</li>
                                        <li><strong>Bathrooms:</strong> @residence.BathroomNumber</li>
                                    </ul>

                                    <div class="mt-auto d-flex justify-content-between align-items-center">
                                        <div class="text-primary fw-bold">$@residence.PricePerNight.ToString("0.00") <small class="text-muted">/ night</small></div>

                                        <form asp-controller="Reservations" asp-action="Cancel" method="post" class="ms-2">
                                            @Html.AntiForgeryToken()
                                            <input type="hidden" name="residenceId" value="@residence.ResidenceID" />
                                            <button type="submit" class="btn btn-sm btn-outline-danger">
                                                Cancel
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="mt-4 text-center">
            <a asp-controller="Home" asp-action="Index"
                asp-route-ActiveWhere ="@Model.ActiveWhere"
                asp-route-ActiveWho ="@Model.ActiveWho"
                class="btn btn-outline-secondary">
                Back to Home
            </a>
        </div>
    }
</div>